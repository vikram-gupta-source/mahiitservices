# Apache .htaccess to support clean URLs and redirect .html to directory paths
<IfModule mod_rewrite.c>
  RewriteEngine On

  # Redirect direct .html requests to clean URL (301)
  RewriteCond %{THE_REQUEST} \s/([^\s]+?)\.html [NC]
  RewriteRule ^ /%1 [R=301,L]

  # If requested path isn't a file or dir but a .html file exists, serve it internally
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}.html -f
  RewriteRule ^(.*)$ $1.html [L]

  # Optional: deny access to hidden files and common sensitive files
  <FilesMatch "^(?:\.|env)$">
    Require all denied
  </FilesMatch>
</IfModule>
